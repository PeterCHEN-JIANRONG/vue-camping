(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53587222"],{"0e71":function(t,e,c){"use strict";c.r(e);var r=c("7a23"),o=Object(r["withScopeId"])("data-v-43f60500");Object(r["pushScopeId"])("data-v-43f60500");var a=Object(r["createVNode"])("div",{class:"banner"},null,-1),n={class:"container"},i={key:0,class:"text-center py-5"},s=Object(r["createVNode"])("p",{class:"h2 mb-5"},"購物車尚無品項，趕緊去選購吧！",-1),d=Object(r["createVNode"])("i",{class:"bi bi-arrow-left me-2"},null,-1),l=Object(r["createTextVNode"])("繼續選購 "),u={key:1,class:"row justify-content-center mt-5"},b={class:"col-md-10 col-lg-8 col-xl-6"},p=Object(r["createVNode"])("h1",{class:"text-center",id:"main"},"購物車",-1),f={class:"text-end"},h={class:"table align-middle mb-4 d-none d-sm-table"},v=Object(r["createVNode"])("thead",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th"),Object(r["createVNode"])("th",{class:"table__img"},"照片"),Object(r["createVNode"])("th",null,"品名"),Object(r["createVNode"])("th",{class:"table__number"},"數量"),Object(r["createVNode"])("th",null,"金額")])],-1),g={class:"product__list"},j=Object(r["createVNode"])("i",{class:"bi bi-trash"},null,-1),O={class:"input-group input-group-sm"},m={class:"input-group"},y={class:"input-group-text",id:"basic-addon2"},N={class:"text-end"},V=Object(r["createVNode"])("td",{colspan:"4",class:"text-end"},"總計",-1),k={class:"text-end"},x={class:"product__list mb-4 d-block d-sm-none"},C={class:"row align-items-center mb-3"},w={class:"col-3"},S={class:"col-9"},B={class:"row align-items-center"},I={class:"col-3 text-center"},_=Object(r["createVNode"])("i",{class:"bi bi-trash"},null,-1),E={class:"col-5 text-center"},$={class:"input-group input-group-sm"},D={class:"input-group"},L={class:"input-group-text",id:"basic-addon2"},A={class:"col text-center"},M={class:"row mb-5"},z={class:"col mb-2"},R=Object(r["createVNode"])("i",{class:"bi bi-arrow-left me-2"},null,-1),U=Object(r["createTextVNode"])("繼續選購 "),F={class:"col"},P=Object(r["createVNode"])("span",{class:"me-2"},"前往結帳",-1),T=Object(r["createVNode"])("i",{class:"bi bi-arrow-right"},null,-1),q={class:"bg-light py-3"},Q={class:"container"},J={class:"row justify-content-between"},K=Object(r["createVNode"])("div",{class:"col-12"},[Object(r["createVNode"])("h2",{class:"mb-3 "},"推薦商品")],-1),W={key:0,class:"bg-danger text-white d-inline-block px-2 py-1"},G={class:"card-body d-flex flex-column justify-content-center"},H={class:"card-title h5"},X={key:0,class:"h5 text-center py-1"},Y={key:0,class:"h6 text-decoration-line-through"},Z={key:1,class:"h4 text-danger fw-bold"},tt={key:2,class:"h4 fw-bold"},et=Object(r["createTextVNode"])(" 元 "),ct={class:"btn-group btn-group-sm"};Object(r["popScopeId"])();var rt=o((function(t,e,c,o,rt,ot){var at=Object(r["resolveComponent"])("Loading");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[a,Object(r["createVNode"])("div",n,[rt.hasCartsItems?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])("div",i,[s,Object(r["createVNode"])("button",{type:"button",class:"btn btn-outline-primary",onClick:e[1]||(e[1]=function(e){return t.$router.push("/products/all")})},[d,l])])),rt.cart.carts.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])("div",u,[Object(r["createVNode"])("div",b,[p,Object(r["createVNode"])("div",f,[Object(r["createVNode"])("button",{class:"btn btn-outline-danger",type:"button",disabled:!rt.hasCartsItems,onClick:e[2]||(e[2]=function(){return ot.deleteAllCarts&&ot.deleteAllCarts.apply(ot,arguments)})}," 清空購物車 ",8,["disabled"])]),Object(r["createVNode"])("table",h,[v,Object(r["createVNode"])("tbody",g,[rt.cart.carts?(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],{key:0},Object(r["renderList"])(rt.cart.carts,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:e.id},[Object(r["createVNode"])("td",null,[Object(r["createVNode"])("button",{type:"button",title:"刪除",class:"btn btn-outline-danger btn-sm",onClick:function(t){return ot.removeCartItem(e.id)},disabled:rt.loadingStatus.loadingItem===e.id},[j],8,["onClick","disabled"])]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("div",{class:"product__bg",style:{backgroundImage:"url('".concat(e.product.imageUrl,"')")}},null,4)]),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.product.title),1),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("div",O,[Object(r["createVNode"])("div",m,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{class:"form-control text-center",type:"number",min:"1","onUpdate:modelValue":function(t){return e.qty=t},onBlur:function(t){return ot.updateCart(e)},disabled:rt.loadingStatus.loadingItem===e.id},null,40,["onUpdate:modelValue","onBlur","disabled"]),[[r["vModelText"],e.qty,void 0,{number:!0}]]),Object(r["createVNode"])("span",y,Object(r["toDisplayString"])(e.product.unit),1)])])]),Object(r["createVNode"])("td",N,Object(r["toDisplayString"])(t.$filters.currency(e.total)),1)])})),128)):Object(r["createCommentVNode"])("",!0)]),Object(r["createVNode"])("tfoot",null,[Object(r["createVNode"])("tr",null,[V,Object(r["createVNode"])("td",k,Object(r["toDisplayString"])(t.$filters.currency(rt.cart.total)),1)])])]),Object(r["createVNode"])("div",x,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(rt.cart.carts,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:"border-bottom border-1 mb-3 pb-2",key:"".concat(e.id,"_")},[Object(r["createVNode"])("div",C,[Object(r["createVNode"])("div",w,[Object(r["createVNode"])("div",{class:"product__bg",style:{backgroundImage:"url('".concat(e.product.imageUrl,"')")}},null,4)]),Object(r["createVNode"])("div",S,Object(r["toDisplayString"])(e.product.title),1)]),Object(r["createVNode"])("div",B,[Object(r["createVNode"])("div",I,[Object(r["createVNode"])("button",{type:"button",title:"刪除",class:"btn btn-outline-danger btn-sm",onClick:function(t){return ot.removeCartItem(e.id)},disabled:rt.loadingStatus.loadingItem===e.id},[_],8,["onClick","disabled"])]),Object(r["createVNode"])("div",E,[Object(r["createVNode"])("div",$,[Object(r["createVNode"])("div",D,[Object(r["withDirectives"])(Object(r["createVNode"])("input",{class:"form-control text-center",type:"number",min:"1","onUpdate:modelValue":function(t){return e.qty=t},onBlur:function(t){return ot.updateCart(e)},disabled:rt.loadingStatus.loadingItem===e.id},null,40,["onUpdate:modelValue","onBlur","disabled"]),[[r["vModelText"],e.qty,void 0,{number:!0}]]),Object(r["createVNode"])("span",L,Object(r["toDisplayString"])(e.product.unit),1)])])]),Object(r["createVNode"])("div",A,Object(r["toDisplayString"])(t.$filters.currency(e.total)),1)])])})),128))]),Object(r["createVNode"])("div",M,[Object(r["createVNode"])("div",z,[Object(r["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary btn-block",onClick:e[3]||(e[3]=function(e){return t.$router.push("/products/all")})},[R,U])]),Object(r["createVNode"])("div",F,[Object(r["createVNode"])("button",{type:"button",class:"btn btn-primary btn-block",onClick:e[4]||(e[4]=function(e){return t.$router.push("/order")})},[P,T])])])])])):Object(r["createCommentVNode"])("",!0)]),Object(r["createVNode"])("div",q,[Object(r["createVNode"])("div",Q,[Object(r["createVNode"])("div",J,[K,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(rt.randomProducts,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:"col-md-6 col-xl-3 mb-4",key:e.id},[Object(r["createVNode"])("div",{class:"card",onClick:function(c){return t.$router.push("/product/".concat(e.id))}},[Object(r["createVNode"])("div",{class:"card__img position-relative border-bottom border-1 border-muted",style:{backgroundImage:"url('".concat(e.imageUrl,"')")}},[e.options.sell_status?(Object(r["openBlock"])(),Object(r["createBlock"])("span",W,Object(r["toDisplayString"])(e.options.sell_status),1)):Object(r["createCommentVNode"])("",!0)],4),Object(r["createVNode"])("div",G,[Object(r["createVNode"])("h2",H,Object(r["toDisplayString"])(e.title),1),e.price?(Object(r["openBlock"])(),Object(r["createBlock"])("div",X,[e.price!=e.origin_price?(Object(r["openBlock"])(),Object(r["createBlock"])("span",Y," $"+Object(r["toDisplayString"])(t.$filters.currency(e.origin_price)),1)):Object(r["createCommentVNode"])("",!0),e.price!=e.origin_price?(Object(r["openBlock"])(),Object(r["createBlock"])("span",Z," $"+Object(r["toDisplayString"])(t.$filters.currency(e.price)),1)):Object(r["createCommentVNode"])("",!0),e.price==e.origin_price?(Object(r["openBlock"])(),Object(r["createBlock"])("span",tt," $"+Object(r["toDisplayString"])(t.$filters.currency(e.price)),1)):Object(r["createCommentVNode"])("",!0),et])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("div",ct,[Object(r["createVNode"])("button",{type:"button",class:"btn btn-secondary",onClick:Object(r["withModifiers"])((function(t){return ot.addCart(e.id,1)}),["stop"]),disabled:rt.loadingStatus.loadingItem===e.id||!e.is_enabled}," 加到購物車 ",8,["onClick","disabled"])])])],8,["onClick"])])})),128))])])]),Object(r["createVNode"])(at,{active:rt.isLoading},null,8,["active"])],64)})),ot=(c("99af"),c("d3b7"),c("6062"),c("3ca3"),c("ddb0"),c("159b"),c("37ca"));function at(t){return Math.floor(Math.random()*t)}var nt={data:function(){return{cart:{total:0,final_total:0,carts:[]},hasCartsItems:!1,loadingStatus:{loadingItem:""},isLoading:!1,products:[],randomProducts:[]}},methods:{getCart:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/cart");this.$http.get(e).then((function(e){t.isLoading=!1,e.data.success?t.cart=e.data.data:t.$httpMessageState(e,e.data.message)}))},updateCart:function(t){var e=this;this.isLoading=!0,this.loadingStatus.loadingItem=t.id;var c={product_id:t.product_id,qty:t.qty},r="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/cart/").concat(t.id);this.$http.put(r,{data:c}).then((function(t){e.isLoading=!1,e.loadingStatus.loadingItem="",e.$httpMessageState(t,t.data.message),t.data.success&&e.getCart()}))},removeCartItem:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/cart/").concat(t);this.$http.delete(c).then((function(t){e.isLoading=!1,e.$httpMessageState(t,t.data.message),t.data.success&&(e.getCart(),ot["a"].emit("update-cartNum"))}))},deleteAllCarts:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/carts");this.$http.delete(e).then((function(e){t.isLoading=!1,t.$httpMessageState(e,e.data.message),e.data.success&&(t.getCart(),ot["a"].emit("update-cartNum"))}))},getProductsAll:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/products/all");this.$http.get(e).then((function(e){t.isLoading=!1,e.data.success?(t.products=e.data.products,t.getRandomProducts()):t.$httpMessageState(e,e.data.message)}))},getRandomProducts:function(){for(var t=this,e=new Set([]),c=this.products.length<4?this.products.length:4,r=0;e.size<c;r+1){var o=at(this.products.length);e.add(o)}this.randomProducts=[],e.forEach((function(e){t.randomProducts.push(t.products[e])}))},addCart:function(t){var e=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0;var r={product_id:t,qty:c},o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/cart");this.$http.post(o,{data:r}).then((function(t){e.isLoading=!1,e.$httpMessageState(t,t.data.message),t.data.success&&(e.qty=1,ot["a"].emit("update-cartNum"),e.getCart())}))}},watch:{cart:function(){this.hasCartsItems=!!this.cart.carts.length}},created:function(){this.getCart(),this.getProductsAll()}};c("a121");nt.render=rt,nt.__scopeId="data-v-43f60500";e["default"]=nt},"159b":function(t,e,c){var r=c("da84"),o=c("fdbc"),a=c("17c2"),n=c("9112");for(var i in o){var s=r[i],d=s&&s.prototype;if(d&&d.forEach!==a)try{n(d,"forEach",a)}catch(l){d.forEach=a}}},"17c2":function(t,e,c){"use strict";var r=c("b727").forEach,o=c("a640"),a=o("forEach");t.exports=a?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,e,c){var r=c("d039"),o=c("b622"),a=c("2d00"),n=o("species");t.exports=function(t){return a>=51||!r((function(){var e=[],c=e.constructor={};return c[n]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},6062:function(t,e,c){"use strict";var r=c("6d61"),o=c("6566");t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),o)},6566:function(t,e,c){"use strict";var r=c("9bf2").f,o=c("7c73"),a=c("e2cc"),n=c("0366"),i=c("19aa"),s=c("2266"),d=c("7dd0"),l=c("2626"),u=c("83ab"),b=c("f183").fastKey,p=c("69f3"),f=p.set,h=p.getterFor;t.exports={getConstructor:function(t,e,c,d){var l=t((function(t,r){i(t,l,e),f(t,{type:e,index:o(null),first:void 0,last:void 0,size:0}),u||(t.size=0),void 0!=r&&s(r,t[d],{that:t,AS_ENTRIES:c})})),p=h(e),v=function(t,e,c){var r,o,a=p(t),n=g(t,e);return n?n.value=c:(a.last=n={index:o=b(e,!0),key:e,value:c,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=n),r&&(r.next=n),u?a.size++:t.size++,"F"!==o&&(a.index[o]=n)),t},g=function(t,e){var c,r=p(t),o=b(e);if("F"!==o)return r.index[o];for(c=r.first;c;c=c.next)if(c.key==e)return c};return a(l.prototype,{clear:function(){var t=this,e=p(t),c=e.index,r=e.first;while(r)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete c[r.index],r=r.next;e.first=e.last=void 0,u?e.size=0:t.size=0},delete:function(t){var e=this,c=p(e),r=g(e,t);if(r){var o=r.next,a=r.previous;delete c.index[r.index],r.removed=!0,a&&(a.next=o),o&&(o.previous=a),c.first==r&&(c.first=o),c.last==r&&(c.last=a),u?c.size--:e.size--}return!!r},forEach:function(t){var e,c=p(this),r=n(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:c.first){r(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!g(this,t)}}),a(l.prototype,c?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return v(this,0===t?0:t,e)}}:{add:function(t){return v(this,t=0===t?0:t,t)}}),u&&r(l.prototype,"size",{get:function(){return p(this).size}}),l},setStrong:function(t,e,c){var r=e+" Iterator",o=h(e),a=h(r);d(t,e,(function(t,e){f(this,{type:r,target:t,state:o(t),kind:e,last:void 0})}),(function(){var t=a(this),e=t.kind,c=t.last;while(c&&c.removed)c=c.previous;return t.target&&(t.last=c=c?c.next:t.state.first)?"keys"==e?{value:c.key,done:!1}:"values"==e?{value:c.value,done:!1}:{value:[c.key,c.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),c?"entries":"values",!c,!0),l(e)}}},"65f0":function(t,e,c){var r=c("861d"),o=c("e8b5"),a=c("b622"),n=a("species");t.exports=function(t,e){var c;return o(t)&&(c=t.constructor,"function"!=typeof c||c!==Array&&!o(c.prototype)?r(c)&&(c=c[n],null===c&&(c=void 0)):c=void 0),new(void 0===c?Array:c)(0===e?0:e)}},"6d61":function(t,e,c){"use strict";var r=c("23e7"),o=c("da84"),a=c("94ca"),n=c("6eeb"),i=c("f183"),s=c("2266"),d=c("19aa"),l=c("861d"),u=c("d039"),b=c("1c7e"),p=c("d44e"),f=c("7156");t.exports=function(t,e,c){var h=-1!==t.indexOf("Map"),v=-1!==t.indexOf("Weak"),g=h?"set":"add",j=o[t],O=j&&j.prototype,m=j,y={},N=function(t){var e=O[t];n(O,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(v&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!l(t))&&e.call(this,0===t?0:t)}:function(t,c){return e.call(this,0===t?0:t,c),this})},V=a(t,"function"!=typeof j||!(v||O.forEach&&!u((function(){(new j).entries().next()}))));if(V)m=c.getConstructor(e,t,h,g),i.REQUIRED=!0;else if(a(t,!0)){var k=new m,x=k[g](v?{}:-0,1)!=k,C=u((function(){k.has(1)})),w=b((function(t){new j(t)})),S=!v&&u((function(){var t=new j,e=5;while(e--)t[g](e,e);return!t.has(-0)}));w||(m=e((function(e,c){d(e,m,t);var r=f(new j,e,m);return void 0!=c&&s(c,r[g],{that:r,AS_ENTRIES:h}),r})),m.prototype=O,O.constructor=m),(C||S)&&(N("delete"),N("has"),h&&N("get")),(S||x)&&N(g),v&&O.clear&&delete O.clear}return y[t]=m,r({global:!0,forced:m!=j},y),p(m,t),v||c.setStrong(m,t,h),m}},7156:function(t,e,c){var r=c("861d"),o=c("d2bb");t.exports=function(t,e,c){var a,n;return o&&"function"==typeof(a=e.constructor)&&a!==c&&r(n=a.prototype)&&n!==c.prototype&&o(t,n),t}},8418:function(t,e,c){"use strict";var r=c("c04e"),o=c("9bf2"),a=c("5c6c");t.exports=function(t,e,c){var n=r(e);n in t?o.f(t,n,a(0,c)):t[n]=c}},"99af":function(t,e,c){"use strict";var r=c("23e7"),o=c("d039"),a=c("e8b5"),n=c("861d"),i=c("7b0b"),s=c("50c4"),d=c("8418"),l=c("65f0"),u=c("1dde"),b=c("b622"),p=c("2d00"),f=b("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",g=p>=51||!o((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),j=u("concat"),O=function(t){if(!n(t))return!1;var e=t[f];return void 0!==e?!!e:a(t)},m=!g||!j;r({target:"Array",proto:!0,forced:m},{concat:function(t){var e,c,r,o,a,n=i(this),u=l(n,0),b=0;for(e=-1,r=arguments.length;e<r;e++)if(a=-1===e?n:arguments[e],O(a)){if(o=s(a.length),b+o>h)throw TypeError(v);for(c=0;c<o;c++,b++)c in a&&d(u,b,a[c])}else{if(b>=h)throw TypeError(v);d(u,b++,a)}return u.length=b,u}})},a121:function(t,e,c){"use strict";c("a19c")},a19c:function(t,e,c){},b727:function(t,e,c){var r=c("0366"),o=c("44ad"),a=c("7b0b"),n=c("50c4"),i=c("65f0"),s=[].push,d=function(t){var e=1==t,c=2==t,d=3==t,l=4==t,u=6==t,b=7==t,p=5==t||u;return function(f,h,v,g){for(var j,O,m=a(f),y=o(m),N=r(h,v,3),V=n(y.length),k=0,x=g||i,C=e?x(f,V):c||b?x(f,0):void 0;V>k;k++)if((p||k in y)&&(j=y[k],O=N(j,k,m),t))if(e)C[k]=O;else if(O)switch(t){case 3:return!0;case 5:return j;case 6:return k;case 2:s.call(C,j)}else switch(t){case 4:return!1;case 7:s.call(C,j)}return u?-1:d||l?l:C}};t.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterOut:d(7)}},bb2f:function(t,e,c){var r=c("d039");t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},e8b5:function(t,e,c){var r=c("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},f183:function(t,e,c){var r=c("d012"),o=c("861d"),a=c("5135"),n=c("9bf2").f,i=c("90e3"),s=c("bb2f"),d=i("meta"),l=0,u=Object.isExtensible||function(){return!0},b=function(t){n(t,d,{value:{objectID:"O"+ ++l,weakData:{}}})},p=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,d)){if(!u(t))return"F";if(!e)return"E";b(t)}return t[d].objectID},f=function(t,e){if(!a(t,d)){if(!u(t))return!0;if(!e)return!1;b(t)}return t[d].weakData},h=function(t){return s&&v.REQUIRED&&u(t)&&!a(t,d)&&b(t),t},v=t.exports={REQUIRED:!1,fastKey:p,getWeakData:f,onFreeze:h};r[d]=!0}}]);
//# sourceMappingURL=chunk-53587222.442a83a5.js.map