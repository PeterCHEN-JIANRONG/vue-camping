(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52d7340d"],{"159b":function(t,e,c){var o=c("da84"),a=c("fdbc"),r=c("17c2"),n=c("9112");for(var i in a){var s=o[i],d=s&&s.prototype;if(d&&d.forEach!==r)try{n(d,"forEach",r)}catch(u){d.forEach=r}}},"17c2":function(t,e,c){"use strict";var o=c("b727").forEach,a=c("a640"),r=a("forEach");t.exports=r?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},"1dde":function(t,e,c){var o=c("d039"),a=c("b622"),r=c("2d00"),n=a("species");t.exports=function(t){return r>=51||!o((function(){var e=[],c=e.constructor={};return c[n]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"395d":function(t,e,c){"use strict";c.r(e);var o=c("7a23"),a=Object(o["withScopeId"])("data-v-76be5e69");Object(o["pushScopeId"])("data-v-76be5e69");var r=Object(o["createVNode"])("div",{class:"banner"},null,-1),n={class:"container"},i={key:0,class:"text-center py-5"},s=Object(o["createVNode"])("p",{class:"h2 mb-5"},"購物車尚無品項，趕緊去選購吧！",-1),d=Object(o["createVNode"])("i",{class:"bi bi-arrow-left me-2"},null,-1),u=Object(o["createTextVNode"])("繼續選購 "),l={key:1,class:"row justify-content-center mt-5"},p={class:"col-md-6"},b=Object(o["createVNode"])("h1",{class:"text-center"},"購物車",-1),f={class:"text-end"},h={class:"table align-middle mb-3"},v=Object(o["createVNode"])("thead",null,[Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th"),Object(o["createVNode"])("th",null,"品名"),Object(o["createVNode"])("th",{style:{width:"150px"}},"數量/單位"),Object(o["createVNode"])("th",null,"單價")])],-1),g=Object(o["createVNode"])("i",{class:"bi bi-trash"},null,-1),j={key:0,class:"text-success"},O={class:"input-group input-group-sm"},m={class:"input-group"},y={class:"input-group-text",id:"basic-addon2"},x={class:"text-end"},N={key:0,class:"text-success"},k=Object(o["createVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),V={class:"text-end"},C={key:0},w=Object(o["createVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),S={class:"text-end text-success"},B={class:"row mb-5"},$={class:"col-6"},E=Object(o["createVNode"])("i",{class:"bi bi-arrow-left me-2"},null,-1),I=Object(o["createTextVNode"])("繼續選購 "),_={class:"col-6"},L=Object(o["createVNode"])("span",{class:"me-2"},"前往結帳",-1),D=Object(o["createVNode"])("i",{class:"bi bi-arrow-right"},null,-1),M={class:"bg-light py-3"},A={class:"container"},z={class:"row justify-content-between"},P=Object(o["createVNode"])("div",{class:"col-12"},[Object(o["createVNode"])("h2",{class:"mb-3 "},"推薦商品")],-1),R={key:0,class:"bg-danger text-white d-inline-block px-2 py-1"},T={class:"card-body d-flex flex-column justify-content-center"},F={class:"card-title h5"},q={key:0,class:"h5 text-center py-1"},U={key:0,class:"h6 text-decoration-line-through"},Q={key:1,class:"h4 text-danger fw-bold"},J={key:2,class:"h4 fw-bold"},K=Object(o["createTextVNode"])(" 元 "),W={class:"btn-group btn-group-sm"};Object(o["popScopeId"])();var G=a((function(t,e,c,a,G,H){var X=Object(o["resolveComponent"])("Loading");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[r,Object(o["createVNode"])("div",n,[0===G.cart.carts.length?(Object(o["openBlock"])(),Object(o["createBlock"])("div",i,[s,Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[1]||(e[1]=function(e){return t.$router.push("/products/all")})},[d,u])])):Object(o["createCommentVNode"])("",!0),G.cart.carts.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])("div",l,[Object(o["createVNode"])("div",p,[b,Object(o["createVNode"])("div",f,[Object(o["createVNode"])("button",{class:"btn btn-outline-danger",type:"button",disabled:!G.hasCartsItems,onClick:e[2]||(e[2]=function(){return H.deleteAllCarts&&H.deleteAllCarts.apply(H,arguments)})}," 清空購物車 ",8,["disabled"])]),Object(o["createVNode"])("table",h,[v,Object(o["createVNode"])("tbody",null,[G.cart.carts?(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],{key:0},Object(o["renderList"])(G.cart.carts,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:e.id},[Object(o["createVNode"])("td",null,[Object(o["createVNode"])("button",{type:"button",title:"刪除",class:"btn btn-outline-danger btn-sm",onClick:function(t){return H.removeCartItem(e.id)},disabled:G.loadingStatus.loadingItem===e.id},[g],8,["onClick","disabled"])]),Object(o["createVNode"])("td",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.product.title)+" ",1),e.coupon?(Object(o["openBlock"])(),Object(o["createBlock"])("div",j," 已套用優惠券 ")):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",O,[Object(o["createVNode"])("div",m,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{class:"form-control text-center",type:"number",min:"1","onUpdate:modelValue":function(t){return e.qty=t},onBlur:function(t){return H.updateCart(e)},disabled:G.loadingStatus.loadingItem===e.id},null,40,["onUpdate:modelValue","onBlur","disabled"]),[[o["vModelText"],e.qty,void 0,{number:!0}]]),Object(o["createVNode"])("span",y,Object(o["toDisplayString"])(e.product.unit),1)])])]),Object(o["createVNode"])("td",x,[G.cart.final_total!==G.cart.total?(Object(o["openBlock"])(),Object(o["createBlock"])("small",N,"折扣價：")):Object(o["createCommentVNode"])("",!0),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(t.$filters.currency(e.final_total)),1)])])})),128)):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("tfoot",null,[Object(o["createVNode"])("tr",null,[k,Object(o["createVNode"])("td",V,Object(o["toDisplayString"])(t.$filters.currency(G.cart.total)),1)]),G.cart.final_total!==G.cart.total?(Object(o["openBlock"])(),Object(o["createBlock"])("tr",C,[w,Object(o["createVNode"])("td",S,Object(o["toDisplayString"])(t.$filters.currency(G.cart.final_total)),1)])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createVNode"])("div",B,[Object(o["createVNode"])("div",$,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary btn-block",onClick:e[3]||(e[3]=function(e){return t.$router.push("/products/all")})},[E,I])]),Object(o["createVNode"])("div",_,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-primary btn-block",onClick:e[4]||(e[4]=function(e){return t.$router.push("/cartsCheckout")})},[L,D])])])])])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("div",M,[Object(o["createVNode"])("div",A,[Object(o["createVNode"])("div",z,[P,(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(G.randomProducts,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"col-md-6 col-lg-4 col-xl-3 mb-4",key:e.id},[Object(o["createVNode"])("div",{class:"card",onClick:function(c){return t.pushProductPage(e)}},[Object(o["createVNode"])("div",{class:"card__img position-relative",style:{backgroundImage:"url('".concat(e.imageUrl,"')")}},[e.options.sell_status?(Object(o["openBlock"])(),Object(o["createBlock"])("span",R,Object(o["toDisplayString"])(e.options.sell_status),1)):Object(o["createCommentVNode"])("",!0)],4),Object(o["createVNode"])("div",T,[Object(o["createVNode"])("h2",F,Object(o["toDisplayString"])(e.title),1),e.price?(Object(o["openBlock"])(),Object(o["createBlock"])("div",q,[e.price!=e.origin_price?(Object(o["openBlock"])(),Object(o["createBlock"])("span",U," $"+Object(o["toDisplayString"])(t.$filters.currency(e.origin_price)),1)):Object(o["createCommentVNode"])("",!0),e.price!=e.origin_price?(Object(o["openBlock"])(),Object(o["createBlock"])("span",Q," $"+Object(o["toDisplayString"])(t.$filters.currency(e.price)),1)):Object(o["createCommentVNode"])("",!0),e.price==e.origin_price?(Object(o["openBlock"])(),Object(o["createBlock"])("span",J," $"+Object(o["toDisplayString"])(t.$filters.currency(e.price)),1)):Object(o["createCommentVNode"])("",!0),K])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("div",W,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-secondary",onClick:Object(o["withModifiers"])((function(t){return H.addCart(e.id,1)}),["stop"]),disabled:G.loadingStatus.loadingItem===e.id||!e.is_enabled}," 加到購物車 ",8,["onClick","disabled"])])])],8,["onClick"])])})),128))])])]),Object(o["createVNode"])(X,{active:G.isLoading},null,8,["active"])],64)})),H=(c("99af"),c("d3b7"),c("6062"),c("3ca3"),c("ddb0"),c("159b"),c("37ca"));function X(t){return Math.floor(Math.random()*t)}var Y={data:function(){return{cart:{total:0,final_total:0,carts:[]},form:{user:{name:"",email:"",tel:"",address:""},message:""},hasCartsItems:!1,loadingStatus:{loadingItem:""},isLoading:!1,coupon_code:"",products:[],randomProducts:[]}},methods:{getCart:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/cart");this.$http.get(e).then((function(e){t.isLoading=!1,e.data.success?t.cart=e.data.data:t.$httpMessageState(e,e.data.message)})).catch((function(t){console.dir(t)}))},updateCart:function(t){var e=this;this.isLoading=!0,this.loadingStatus.loadingItem=t.id;var c={product_id:t.product_id,qty:t.qty},o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/cart/").concat(t.id);this.$http.put(o,{data:c}).then((function(t){e.isLoading=!1,e.loadingStatus.loadingItem="",e.$httpMessageState(t,t.data.message),t.data.success&&e.getCart()})).catch((function(t){console.dir(t)}))},removeCartItem:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/cart/").concat(t);this.$http.delete(c).then((function(t){e.isLoading=!1,e.$httpMessageState(t,t.data.message),t.data.success&&(e.getCart(),H["a"].emit("update-cartNum"))})).catch((function(t){console.dir(t)}))},deleteAllCarts:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/carts");this.$http.delete(e).then((function(e){t.isLoading=!1,t.$httpMessageState(e,e.data.message),e.data.success&&(t.getCart(),H["a"].emit("update-cartNum"))})).catch((function(t){console.dir(t)}))},createOrder:function(){var t=this;this.isLoading=!0;var e=this.form,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/order");this.$http.post(c,{data:e}).then((function(e){t.isLoading=!1,t.$httpMessageState(e,"建立訂單"),e.data.success&&(H["a"].emit("update-cartNum"),t.$router.push("/checkout/".concat(e.data.orderId)),t.$refs.form.resetForm(),t.form.message="")})).catch((function(t){console.dir(t)}))},addCouponCode:function(){var t=this,e={code:this.coupon_code};this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/coupon");this.$http.post(c,{data:e}).then((function(e){t.isLoading=!1,e.data.success?(t.$httpMessageState(e,"套用優惠券"),t.getCart()):t.$httpMessageState(e,e.data.message)}))},getProductsAll:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/products/all");this.$http.get(e).then((function(e){t.isLoading=!1,e.data.success?(t.products=e.data.products,t.getRandomProducts()):t.$httpMessageState(e,e.data.message)})).catch((function(t){console.dir(t)}))},getRandomProducts:function(){for(var t=this,e=new Set([]),c=this.products.length<4?this.products.length:4,o=0;e.size<c;o+1){var a=X(this.products.length);e.add(a)}this.randomProducts=[],e.forEach((function(e){t.randomProducts.push(t.products[e])}))},addCart:function(t){var e=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.isLoading=!0;var o={product_id:t,qty:c},a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/cart");this.$http.post(a,{data:o}).then((function(t){e.isLoading=!1,e.$httpMessageState(t,t.data.message),t.data.success&&(e.qty=1,H["a"].emit("update-cartNum"),e.getCart())})).catch((function(t){console.dir(t)}))}},watch:{cart:function(){this.hasCartsItems=!!this.cart.carts.length}},created:function(){this.getCart(),this.getProductsAll()}};c("3c65");Y.render=G,Y.__scopeId="data-v-76be5e69";e["default"]=Y},"3c65":function(t,e,c){"use strict";c("6130")},6062:function(t,e,c){"use strict";var o=c("6d61"),a=c("6566");t.exports=o("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),a)},6130:function(t,e,c){},6566:function(t,e,c){"use strict";var o=c("9bf2").f,a=c("7c73"),r=c("e2cc"),n=c("0366"),i=c("19aa"),s=c("2266"),d=c("7dd0"),u=c("2626"),l=c("83ab"),p=c("f183").fastKey,b=c("69f3"),f=b.set,h=b.getterFor;t.exports={getConstructor:function(t,e,c,d){var u=t((function(t,o){i(t,u,e),f(t,{type:e,index:a(null),first:void 0,last:void 0,size:0}),l||(t.size=0),void 0!=o&&s(o,t[d],{that:t,AS_ENTRIES:c})})),b=h(e),v=function(t,e,c){var o,a,r=b(t),n=g(t,e);return n?n.value=c:(r.last=n={index:a=p(e,!0),key:e,value:c,previous:o=r.last,next:void 0,removed:!1},r.first||(r.first=n),o&&(o.next=n),l?r.size++:t.size++,"F"!==a&&(r.index[a]=n)),t},g=function(t,e){var c,o=b(t),a=p(e);if("F"!==a)return o.index[a];for(c=o.first;c;c=c.next)if(c.key==e)return c};return r(u.prototype,{clear:function(){var t=this,e=b(t),c=e.index,o=e.first;while(o)o.removed=!0,o.previous&&(o.previous=o.previous.next=void 0),delete c[o.index],o=o.next;e.first=e.last=void 0,l?e.size=0:t.size=0},delete:function(t){var e=this,c=b(e),o=g(e,t);if(o){var a=o.next,r=o.previous;delete c.index[o.index],o.removed=!0,r&&(r.next=a),a&&(a.previous=r),c.first==o&&(c.first=a),c.last==o&&(c.last=r),l?c.size--:e.size--}return!!o},forEach:function(t){var e,c=b(this),o=n(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:c.first){o(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!g(this,t)}}),r(u.prototype,c?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return v(this,0===t?0:t,e)}}:{add:function(t){return v(this,t=0===t?0:t,t)}}),l&&o(u.prototype,"size",{get:function(){return b(this).size}}),u},setStrong:function(t,e,c){var o=e+" Iterator",a=h(e),r=h(o);d(t,e,(function(t,e){f(this,{type:o,target:t,state:a(t),kind:e,last:void 0})}),(function(){var t=r(this),e=t.kind,c=t.last;while(c&&c.removed)c=c.previous;return t.target&&(t.last=c=c?c.next:t.state.first)?"keys"==e?{value:c.key,done:!1}:"values"==e?{value:c.value,done:!1}:{value:[c.key,c.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),c?"entries":"values",!c,!0),u(e)}}},"65f0":function(t,e,c){var o=c("861d"),a=c("e8b5"),r=c("b622"),n=r("species");t.exports=function(t,e){var c;return a(t)&&(c=t.constructor,"function"!=typeof c||c!==Array&&!a(c.prototype)?o(c)&&(c=c[n],null===c&&(c=void 0)):c=void 0),new(void 0===c?Array:c)(0===e?0:e)}},"6d61":function(t,e,c){"use strict";var o=c("23e7"),a=c("da84"),r=c("94ca"),n=c("6eeb"),i=c("f183"),s=c("2266"),d=c("19aa"),u=c("861d"),l=c("d039"),p=c("1c7e"),b=c("d44e"),f=c("7156");t.exports=function(t,e,c){var h=-1!==t.indexOf("Map"),v=-1!==t.indexOf("Weak"),g=h?"set":"add",j=a[t],O=j&&j.prototype,m=j,y={},x=function(t){var e=O[t];n(O,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(v&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!u(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!u(t))&&e.call(this,0===t?0:t)}:function(t,c){return e.call(this,0===t?0:t,c),this})},N=r(t,"function"!=typeof j||!(v||O.forEach&&!l((function(){(new j).entries().next()}))));if(N)m=c.getConstructor(e,t,h,g),i.REQUIRED=!0;else if(r(t,!0)){var k=new m,V=k[g](v?{}:-0,1)!=k,C=l((function(){k.has(1)})),w=p((function(t){new j(t)})),S=!v&&l((function(){var t=new j,e=5;while(e--)t[g](e,e);return!t.has(-0)}));w||(m=e((function(e,c){d(e,m,t);var o=f(new j,e,m);return void 0!=c&&s(c,o[g],{that:o,AS_ENTRIES:h}),o})),m.prototype=O,O.constructor=m),(C||S)&&(x("delete"),x("has"),h&&x("get")),(S||V)&&x(g),v&&O.clear&&delete O.clear}return y[t]=m,o({global:!0,forced:m!=j},y),b(m,t),v||c.setStrong(m,t,h),m}},7156:function(t,e,c){var o=c("861d"),a=c("d2bb");t.exports=function(t,e,c){var r,n;return a&&"function"==typeof(r=e.constructor)&&r!==c&&o(n=r.prototype)&&n!==c.prototype&&a(t,n),t}},8418:function(t,e,c){"use strict";var o=c("c04e"),a=c("9bf2"),r=c("5c6c");t.exports=function(t,e,c){var n=o(e);n in t?a.f(t,n,r(0,c)):t[n]=c}},"99af":function(t,e,c){"use strict";var o=c("23e7"),a=c("d039"),r=c("e8b5"),n=c("861d"),i=c("7b0b"),s=c("50c4"),d=c("8418"),u=c("65f0"),l=c("1dde"),p=c("b622"),b=c("2d00"),f=p("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",g=b>=51||!a((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),j=l("concat"),O=function(t){if(!n(t))return!1;var e=t[f];return void 0!==e?!!e:r(t)},m=!g||!j;o({target:"Array",proto:!0,forced:m},{concat:function(t){var e,c,o,a,r,n=i(this),l=u(n,0),p=0;for(e=-1,o=arguments.length;e<o;e++)if(r=-1===e?n:arguments[e],O(r)){if(a=s(r.length),p+a>h)throw TypeError(v);for(c=0;c<a;c++,p++)c in r&&d(l,p,r[c])}else{if(p>=h)throw TypeError(v);d(l,p++,r)}return l.length=p,l}})},b727:function(t,e,c){var o=c("0366"),a=c("44ad"),r=c("7b0b"),n=c("50c4"),i=c("65f0"),s=[].push,d=function(t){var e=1==t,c=2==t,d=3==t,u=4==t,l=6==t,p=7==t,b=5==t||l;return function(f,h,v,g){for(var j,O,m=r(f),y=a(m),x=o(h,v,3),N=n(y.length),k=0,V=g||i,C=e?V(f,N):c||p?V(f,0):void 0;N>k;k++)if((b||k in y)&&(j=y[k],O=x(j,k,m),t))if(e)C[k]=O;else if(O)switch(t){case 3:return!0;case 5:return j;case 6:return k;case 2:s.call(C,j)}else switch(t){case 4:return!1;case 7:s.call(C,j)}return l?-1:d||u?u:C}};t.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6),filterOut:d(7)}},bb2f:function(t,e,c){var o=c("d039");t.exports=!o((function(){return Object.isExtensible(Object.preventExtensions({}))}))},e8b5:function(t,e,c){var o=c("c6b6");t.exports=Array.isArray||function(t){return"Array"==o(t)}},f183:function(t,e,c){var o=c("d012"),a=c("861d"),r=c("5135"),n=c("9bf2").f,i=c("90e3"),s=c("bb2f"),d=i("meta"),u=0,l=Object.isExtensible||function(){return!0},p=function(t){n(t,d,{value:{objectID:"O"+ ++u,weakData:{}}})},b=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,d)){if(!l(t))return"F";if(!e)return"E";p(t)}return t[d].objectID},f=function(t,e){if(!r(t,d)){if(!l(t))return!0;if(!e)return!1;p(t)}return t[d].weakData},h=function(t){return s&&v.REQUIRED&&l(t)&&!r(t,d)&&p(t),t},v=t.exports={REQUIRED:!1,fastKey:b,getWeakData:f,onFreeze:h};o[d]=!0}}]);
//# sourceMappingURL=chunk-52d7340d.68f482f9.js.map