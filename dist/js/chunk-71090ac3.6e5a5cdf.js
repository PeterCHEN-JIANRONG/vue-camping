(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71090ac3"],{"1dde":function(e,t,c){var a=c("d039"),o=c("b622"),r=c("2d00"),s=o("species");e.exports=function(e){return r>=51||!a((function(){var t=[],c=t.constructor={};return c[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"23db":function(e,t,c){},"65f0":function(e,t,c){var a=c("861d"),o=c("e8b5"),r=c("b622"),s=r("species");e.exports=function(e,t){var c;return o(e)&&(c=e.constructor,"function"!=typeof c||c!==Array&&!o(c.prototype)?a(c)&&(c=c[s],null===c&&(c=void 0)):c=void 0),new(void 0===c?Array:c)(0===t?0:t)}},8418:function(e,t,c){"use strict";var a=c("c04e"),o=c("9bf2"),r=c("5c6c");e.exports=function(e,t,c){var s=a(t);s in e?o.f(e,s,r(0,c)):e[s]=c}},"99af":function(e,t,c){"use strict";var a=c("23e7"),o=c("d039"),r=c("e8b5"),s=c("861d"),n=c("7b0b"),l=c("50c4"),i=c("8418"),d=c("65f0"),u=c("1dde"),b=c("b622"),p=c("2d00"),m=b("isConcatSpreadable"),f=9007199254740991,h="Maximum allowed index exceeded",j=p>=51||!o((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),O=u("concat"),V=function(e){if(!s(e))return!1;var t=e[m];return void 0!==t?!!t:r(e)},v=!j||!O;a({target:"Array",proto:!0,forced:v},{concat:function(e){var t,c,a,o,r,s=n(this),u=d(s,0),b=0;for(t=-1,a=arguments.length;t<a;t++)if(r=-1===t?s:arguments[t],V(r)){if(o=l(r.length),b+o>f)throw TypeError(h);for(c=0;c<o;c++,b++)c in r&&i(u,b,r[c])}else{if(b>=f)throw TypeError(h);i(u,b++,r)}return u.length=b,u}})},a5e7:function(e,t,c){"use strict";c("23db")},b0c0:function(e,t,c){var a=c("83ab"),o=c("9bf2").f,r=Function.prototype,s=r.toString,n=/^\s*function ([^ (]*)/,l="name";a&&!(l in r)&&o(r,l,{configurable:!0,get:function(){try{return s.call(this).match(n)[1]}catch(e){return""}}})},e86d:function(e,t,c){"use strict";c.r(t);c("99af"),c("b0c0");var a=c("7a23"),o=Object(a["withScopeId"])("data-v-c8947088");Object(a["pushScopeId"])("data-v-c8947088");var r=Object(a["createVNode"])("div",{class:"banner"},null,-1),s={class:"container"},n={class:"row justify-content-center mt-5"},l={class:"col-md-6"},i=Object(a["createVNode"])("h1",{class:"text-center mb-3"},"訂單確認",-1),d={class:"table align-middle mb-3"},u=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",null,"品名"),Object(a["createVNode"])("th",{style:{width:"150px"}},"數量/單位"),Object(a["createVNode"])("th",null,"單價")])],-1),b={key:0,class:"text-success"},p={class:"text-end"},m={key:0,class:"text-success"},f=Object(a["createVNode"])("td",{colspan:"2",class:"text-end"},"總計",-1),h={class:"text-end"},j={key:0},O=Object(a["createVNode"])("td",{colspan:"2",class:"text-end text-muted"},"折扣",-1),V={class:"text-end text-muted"},v={key:1},N=Object(a["createVNode"])("td",{colspan:"2",class:"text-end text-success"},"折扣價",-1),g={class:"text-end text-success"},y=Object(a["createVNode"])("label",{for:"coupon",class:"h6"},"折扣碼",-1),x={class:"input-group mb-3 input-group-sm"},k={class:"input-group-append"},C=Object(a["createVNode"])("hr",{class:"my-4"},null,-1),w={class:"mb-5 row justify-content-center"},S=Object(a["createVNode"])("h2",{class:"text-center bg-primary text-white py-2"},"客戶資訊",-1),$={class:"mb-3"},B=Object(a["createVNode"])("label",{for:"email",class:"form-label"},"Email*",-1),L={class:"mb-3"},_=Object(a["createVNode"])("label",{for:"name",class:"form-label"},"收件人姓名*",-1),I={class:"mb-3"},M=Object(a["createVNode"])("label",{for:"tel",class:"form-label"},"收件人電話*",-1),A={class:"mb-3"},D=Object(a["createVNode"])("label",{for:"address",class:"form-label"},"收件人地址*",-1),q={class:"mb-3"},T=Object(a["createVNode"])("label",{for:"message",class:"form-label"},"訂單備註",-1),F={class:"row"},U={class:"col-6"},E=Object(a["createVNode"])("i",{class:"bi bi-arrow-left me-2"},null,-1),J=Object(a["createTextVNode"])("返回購物車 "),P={class:"col-6"},z=Object(a["createVNode"])("span",{class:"me-2"},"送出訂單",-1),G=Object(a["createVNode"])("i",{class:"bi bi-arrow-right"},null,-1);Object(a["popScopeId"])();var H=o((function(e,t,c,H,K,Q){var R=Object(a["resolveComponent"])("Field"),W=Object(a["resolveComponent"])("ErrorMessage"),X=Object(a["resolveComponent"])("Form"),Y=Object(a["resolveComponent"])("Loading");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[r,Object(a["createVNode"])("div",s,[Object(a["createVNode"])("div",n,[Object(a["createVNode"])("div",l,[i,Object(a["createVNode"])("table",d,[u,Object(a["createVNode"])("tbody",null,[K.cart.carts?(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],{key:0},Object(a["renderList"])(K.cart.carts,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t.id},[Object(a["createVNode"])("td",null,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.product.title)+" ",1),t.coupon?(Object(a["openBlock"])(),Object(a["createBlock"])("div",b," 已套用優惠券 ")):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])("".concat(t.qty," ").concat(t.product.unit)),1),Object(a["createVNode"])("td",p,[K.cart.final_total!==K.cart.total?(Object(a["openBlock"])(),Object(a["createBlock"])("small",m,"折扣價：")):Object(a["createCommentVNode"])("",!0),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.$filters.currency(t.final_total)),1)])])})),128)):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("tfoot",null,[Object(a["createVNode"])("tr",null,[f,Object(a["createVNode"])("td",h,Object(a["toDisplayString"])(e.$filters.currency(K.cart.total)),1)]),K.cart.final_total!==K.cart.total?(Object(a["openBlock"])(),Object(a["createBlock"])("tr",j,[O,Object(a["createVNode"])("td",V," - "+Object(a["toDisplayString"])(e.$filters.currency(K.cart.total-K.cart.final_total)),1)])):Object(a["createCommentVNode"])("",!0),K.cart.final_total!==K.cart.total?(Object(a["openBlock"])(),Object(a["createBlock"])("tr",v,[N,Object(a["createVNode"])("td",g,Object(a["toDisplayString"])(e.$filters.currency(K.cart.final_total)),1)])):Object(a["createCommentVNode"])("",!0)])]),y,Object(a["createVNode"])("div",x,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",id:"coupon",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return K.coupon_code=e}),placeholder:"請輸入優惠碼"},null,512),[[a["vModelText"],K.coupon_code]]),Object(a["createVNode"])("div",k,[Object(a["createVNode"])("button",{class:"btn btn-outline-success",type:"button",onClick:t[2]||(t[2]=function(){return Q.addCouponCode&&Q.addCouponCode.apply(Q,arguments)})}," 套用優惠碼 ")])]),C])]),Object(a["createVNode"])("div",w,[Object(a["createVNode"])(X,{ref:"form",class:"col-md-6",onSubmit:Q.createOrder},{default:o((function(c){var o=c.errors;return[S,Object(a["createVNode"])("div",$,[B,Object(a["createVNode"])(R,{id:"email",name:"email",type:"email",placeholder:"請輸入 Email",class:["form-control",{"is-invalid":o["email"]}],rules:"email|required",modelValue:K.form.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return K.form.user.email=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(W,{name:"email",class:"invalid-feedback"})]),Object(a["createVNode"])("div",L,[_,Object(a["createVNode"])(R,{id:"name",name:"姓名",type:"text",placeholder:"請輸入姓名",class:["form-control",{"is-invalid":o["姓名"]}],rules:"required",modelValue:K.form.user.name,"onUpdate:modelValue":t[4]||(t[4]=function(e){return K.form.user.name=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(W,{name:"姓名",class:"invalid-feedback"})]),Object(a["createVNode"])("div",I,[M,Object(a["createVNode"])(R,{id:"tel",name:"電話",type:"text",placeholder:"請輸入電話",class:["form-control",{"is-invalid":o["電話"]}],rules:"required|min:8|max:10",modelValue:K.form.user.tel,"onUpdate:modelValue":t[5]||(t[5]=function(e){return K.form.user.tel=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(W,{name:"電話",class:"invalid-feedback"})]),Object(a["createVNode"])("div",A,[D,Object(a["createVNode"])(R,{id:"address",name:"地址",type:"text",placeholder:"請輸入地址",class:["form-control",{"is-invalid":o["地址"]}],rules:"required",modelValue:K.form.user.address,"onUpdate:modelValue":t[6]||(t[6]=function(e){return K.form.user.address=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(W,{name:"地址",class:"invalid-feedback"})]),Object(a["createVNode"])("div",q,[T,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"4","onUpdate:modelValue":t[7]||(t[7]=function(e){return K.form.message=e})},null,512),[[a["vModelText"],K.form.message]])]),Object(a["createVNode"])("div",F,[Object(a["createVNode"])("div",U,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary btn-block",onClick:t[8]||(t[8]=function(t){return e.$router.push("/carts")})},[E,J])]),Object(a["createVNode"])("div",P,[Object(a["createVNode"])("button",{type:"submit",class:"btn btn-primary btn-block",disabled:!K.hasCartsItems},[z,G],8,["disabled"])])])]})),_:1},8,["onSubmit"])])]),Object(a["createVNode"])(Y,{active:K.isLoading},null,8,["active"])],64)})),K=c("37ca"),Q={data:function(){return{cart:{total:0,final_total:0,carts:[]},form:{user:{name:"",email:"",tel:"",address:""},message:""},hasCartsItems:!1,loadingStatus:{loadingItem:""},isLoading:!1,coupon_code:"",products:[],randomProducts:[]}},methods:{getCart:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/cart");this.$http.get(t).then((function(t){e.isLoading=!1,t.data.success?(e.cart=t.data.data,0===e.cart.carts.length&&(e.successAlert("無購物車資料"),e.$router.push("/products/all"))):e.$httpMessageState(t,t.data.message)})).catch((function(e){console.dir(e)}))},updateCart:function(e){var t=this;this.isLoading=!0,this.loadingStatus.loadingItem=e.id;var c={product_id:e.product_id,qty:e.qty},a="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/cart/").concat(e.id);this.$http.put(a,{data:c}).then((function(e){t.isLoading=!1,t.loadingStatus.loadingItem="",t.$httpMessageState(e,e.data.message),e.data.success&&t.getCart()})).catch((function(e){console.dir(e)}))},removeCartItem:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/cart/").concat(e);this.$http.delete(c).then((function(e){t.isLoading=!1,t.$httpMessageState(e,e.data.message),e.data.success&&(t.getCart(),K["a"].emit("update-cartNum"))})).catch((function(e){console.dir(e)}))},deleteAllCarts:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/carts");this.$http.delete(t).then((function(t){e.isLoading=!1,e.$httpMessageState(t,t.data.message),t.data.success&&(e.getCart(),K["a"].emit("update-cartNum"))})).catch((function(e){console.dir(e)}))},createOrder:function(){var e=this;this.isLoading=!0;var t=this.form,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/order");this.$http.post(c,{data:t}).then((function(t){e.isLoading=!1,e.$httpMessageState(t,"建立訂單"),t.data.success&&(K["a"].emit("update-cartNum"),e.$router.push("/checkout/".concat(t.data.orderId)),e.$refs.form.resetForm(),e.form.message="")})).catch((function(e){console.dir(e)}))},addCouponCode:function(){var e=this,t={code:this.coupon_code};this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/coupon");this.$http.post(c,{data:t}).then((function(t){e.isLoading=!1,t.data.success?(e.$httpMessageState(t,"套用優惠券"),e.getCart()):e.$httpMessageState(t,t.data.message)}))},successAlert:function(e){this.$swal.fire({icon:"success",title:e,showConfirmButton:!1,timer:1500})}},watch:{cart:function(){this.hasCartsItems=!!this.cart.carts.length}},created:function(){this.getCart()}};c("a5e7");Q.render=H,Q.__scopeId="data-v-c8947088";t["default"]=Q},e8b5:function(e,t,c){var a=c("c6b6");e.exports=Array.isArray||function(e){return"Array"==a(e)}}}]);
//# sourceMappingURL=chunk-71090ac3.6e5a5cdf.js.map