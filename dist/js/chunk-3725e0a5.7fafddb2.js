(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3725e0a5"],{"1dde":function(e,t,c){var a=c("d039"),o=c("b622"),r=c("2d00"),n=o("species");e.exports=function(e){return r>=51||!a((function(){var t=[],c=t.constructor={};return c[n]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"3f6f":function(e,t,c){"use strict";c("6f0a")},"65f0":function(e,t,c){var a=c("861d"),o=c("e8b5"),r=c("b622"),n=r("species");e.exports=function(e,t){var c;return o(e)&&(c=e.constructor,"function"!=typeof c||c!==Array&&!o(c.prototype)?a(c)&&(c=c[n],null===c&&(c=void 0)):c=void 0),new(void 0===c?Array:c)(0===t?0:t)}},"6f0a":function(e,t,c){},8418:function(e,t,c){"use strict";var a=c("c04e"),o=c("9bf2"),r=c("5c6c");e.exports=function(e,t,c){var n=a(t);n in e?o.f(e,n,r(0,c)):e[n]=c}},"99af":function(e,t,c){"use strict";var a=c("23e7"),o=c("d039"),r=c("e8b5"),n=c("861d"),s=c("7b0b"),l=c("50c4"),i=c("8418"),d=c("65f0"),u=c("1dde"),b=c("b622"),m=c("2d00"),f=b("isConcatSpreadable"),p=9007199254740991,j="Maximum allowed index exceeded",O=m>=51||!o((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),h=u("concat"),V=function(e){if(!n(e))return!1;var t=e[f];return void 0!==t?!!t:r(e)},N=!O||!h;a({target:"Array",proto:!0,forced:N},{concat:function(e){var t,c,a,o,r,n=s(this),u=d(n,0),b=0;for(t=-1,a=arguments.length;t<a;t++)if(r=-1===t?n:arguments[t],V(r)){if(o=l(r.length),b+o>p)throw TypeError(j);for(c=0;c<o;c++,b++)c in r&&i(u,b,r[c])}else{if(b>=p)throw TypeError(j);i(u,b++,r)}return u.length=b,u}})},b0c0:function(e,t,c){var a=c("83ab"),o=c("9bf2").f,r=Function.prototype,n=r.toString,s=/^\s*function ([^ (]*)/,l="name";a&&!(l in r)&&o(r,l,{configurable:!0,get:function(){try{return n.call(this).match(s)[1]}catch(e){return""}}})},cf2a:function(e,t,c){"use strict";c.r(t);c("99af"),c("b0c0");var a=c("7a23"),o=Object(a["withScopeId"])("data-v-64f03815");Object(a["pushScopeId"])("data-v-64f03815");var r=Object(a["createVNode"])("div",{class:"banner"},null,-1),n={class:"container"},s={class:"row justify-content-center mt-5"},l={class:"col-md-6"},i=Object(a["createVNode"])("h1",{class:"text-center mb-3"},"訂單確認",-1),d={class:"table align-middle mb-3"},u=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th",null,"品名"),Object(a["createVNode"])("th",{style:{width:"150px"}},"數量/單位"),Object(a["createVNode"])("th",null,"金額")])],-1),b={key:0,class:"text-success"},m={class:"text-end"},f={key:0,class:"text-muted d-block text-decoration-line-through"},p={key:1,class:"text-success"},j={key:2},O=Object(a["createVNode"])("td",{colspan:"2",class:"text-end"},"總計",-1),h={class:"text-end"},V={key:0},N={colspan:"2",class:"text-end"},v={class:"text-end"},g={key:1},y=Object(a["createVNode"])("td",{colspan:"2",class:"text-end text-success"},"折扣價",-1),k={class:"text-end text-success"},x=Object(a["createVNode"])("label",{for:"coupon",class:"h6"},"折扣碼",-1),C={class:"input-group mb-3 input-group-sm"},w={class:"input-group-append"},B=Object(a["createVNode"])("hr",{class:"my-4"},null,-1),S={class:"mb-5 row justify-content-center"},$=Object(a["createVNode"])("h2",{class:"text-center bg-primary text-white py-2"},"客戶資訊",-1),_={class:"mb-3"},D=Object(a["createVNode"])("label",{for:"email",class:"form-label"},"Email*",-1),L={class:"mb-3"},M=Object(a["createVNode"])("label",{for:"name",class:"form-label"},"收件人姓名*",-1),A={class:"mb-3"},I=Object(a["createVNode"])("label",{for:"tel",class:"form-label"},"收件人電話*",-1),F={class:"mb-3"},T=Object(a["createVNode"])("label",{for:"address",class:"form-label"},"收件人地址*",-1),U={class:"mb-3"},q=Object(a["createVNode"])("label",{for:"message",class:"form-label"},"訂單備註",-1),E={class:"row"},J={class:"col-6"},z=Object(a["createVNode"])("i",{class:"bi bi-arrow-left me-2"},null,-1),G=Object(a["createTextVNode"])("返回購物車 "),H={class:"col-6"},K=Object(a["createVNode"])("span",{class:"me-2"},"送出訂單",-1),P=Object(a["createVNode"])("i",{class:"bi bi-arrow-right"},null,-1);Object(a["popScopeId"])();var Q=o((function(e,t,c,Q,R,W){var X=Object(a["resolveComponent"])("Field"),Y=Object(a["resolveComponent"])("ErrorMessage"),Z=Object(a["resolveComponent"])("Form"),ee=Object(a["resolveComponent"])("Loading");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[r,Object(a["createVNode"])("div",n,[Object(a["createVNode"])("div",s,[Object(a["createVNode"])("div",l,[i,Object(a["createVNode"])("table",d,[u,Object(a["createVNode"])("tbody",null,[R.cart.carts?(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],{key:0},Object(a["renderList"])(R.cart.carts,(function(t){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:t.id},[Object(a["createVNode"])("td",null,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.product.title)+" ",1),t.coupon?(Object(a["openBlock"])(),Object(a["createBlock"])("div",b," 已套用優惠券 ")):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])("".concat(t.qty," ").concat(t.product.unit)),1),Object(a["createVNode"])("td",m,[t.coupon?(Object(a["openBlock"])(),Object(a["createBlock"])("small",f,Object(a["toDisplayString"])(t.total),1)):Object(a["createCommentVNode"])("",!0),t.coupon?(Object(a["openBlock"])(),Object(a["createBlock"])("small",p,"折扣價："+Object(a["toDisplayString"])(e.$filters.currency(t.final_total)),1)):Object(a["createCommentVNode"])("",!0),t.coupon?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("span",j,Object(a["toDisplayString"])(e.$filters.currency(t.final_total)),1))])])})),128)):Object(a["createCommentVNode"])("",!0)]),Object(a["createVNode"])("tfoot",null,[Object(a["createVNode"])("tr",null,[O,Object(a["createVNode"])("td",h,[Object(a["createVNode"])("span",{class:{"text-muted":R.cart.final_total!==R.cart.total,"text-decoration-line-through":R.cart.final_total!==R.cart.total}},Object(a["toDisplayString"])(e.$filters.currency(R.cart.total)),3)])]),R.cart.final_total!==R.cart.total?(Object(a["openBlock"])(),Object(a["createBlock"])("tr",V,[Object(a["createVNode"])("td",N,"折扣"+Object(a["toDisplayString"])(W.discountNumber),1),Object(a["createVNode"])("td",v,"- "+Object(a["toDisplayString"])(e.$filters.currency(R.cart.total-R.cart.final_total)),1)])):Object(a["createCommentVNode"])("",!0),R.cart.final_total!==R.cart.total?(Object(a["openBlock"])(),Object(a["createBlock"])("tr",g,[y,Object(a["createVNode"])("td",k,Object(a["toDisplayString"])(e.$filters.currency(R.cart.final_total)),1)])):Object(a["createCommentVNode"])("",!0)])]),x,Object(a["createVNode"])("div",C,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{type:"text",id:"coupon",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=function(e){return R.coupon_code=e}),placeholder:"請輸入優惠碼"},null,512),[[a["vModelText"],R.coupon_code]]),Object(a["createVNode"])("div",w,[Object(a["createVNode"])("button",{class:"btn btn-outline-success",type:"button",onClick:t[2]||(t[2]=function(){return W.addCouponCode&&W.addCouponCode.apply(W,arguments)})}," 套用優惠碼 ")])]),B])]),Object(a["createVNode"])("div",S,[Object(a["createVNode"])(Z,{ref:"form",class:"col-md-6",onSubmit:W.createOrder},{default:o((function(c){var o=c.errors;return[$,Object(a["createVNode"])("div",_,[D,Object(a["createVNode"])(X,{id:"email",name:"email",type:"email",placeholder:"請輸入 Email",class:["form-control",{"is-invalid":o["email"]}],rules:"email|required",modelValue:R.form.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return R.form.user.email=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(Y,{name:"email",class:"invalid-feedback"})]),Object(a["createVNode"])("div",L,[M,Object(a["createVNode"])(X,{id:"name",name:"姓名",type:"text",placeholder:"請輸入姓名",class:["form-control",{"is-invalid":o["姓名"]}],rules:"required",modelValue:R.form.user.name,"onUpdate:modelValue":t[4]||(t[4]=function(e){return R.form.user.name=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(Y,{name:"姓名",class:"invalid-feedback"})]),Object(a["createVNode"])("div",A,[I,Object(a["createVNode"])(X,{id:"tel",name:"電話",type:"text",placeholder:"請輸入電話",class:["form-control",{"is-invalid":o["電話"]}],rules:"required|min:8|max:10",modelValue:R.form.user.tel,"onUpdate:modelValue":t[5]||(t[5]=function(e){return R.form.user.tel=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(Y,{name:"電話",class:"invalid-feedback"})]),Object(a["createVNode"])("div",F,[T,Object(a["createVNode"])(X,{id:"address",name:"地址",type:"text",placeholder:"請輸入地址",class:["form-control",{"is-invalid":o["地址"]}],rules:"required",modelValue:R.form.user.address,"onUpdate:modelValue":t[6]||(t[6]=function(e){return R.form.user.address=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(Y,{name:"地址",class:"invalid-feedback"})]),Object(a["createVNode"])("div",U,[q,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"4","onUpdate:modelValue":t[7]||(t[7]=function(e){return R.form.message=e})},null,512),[[a["vModelText"],R.form.message]])]),Object(a["createVNode"])("div",E,[Object(a["createVNode"])("div",J,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary btn-block",onClick:t[8]||(t[8]=function(t){return e.$router.push("/carts")})},[z,G])]),Object(a["createVNode"])("div",H,[Object(a["createVNode"])("button",{type:"submit",class:"btn btn-primary btn-block",disabled:!R.hasCartsItems},[K,P],8,["disabled"])])])]})),_:1},8,["onSubmit"])])]),Object(a["createVNode"])(ee,{active:R.isLoading},null,8,["active"])],64)})),R=c("37ca"),W={data:function(){return{cart:{total:0,final_total:0,carts:[]},form:{user:{name:"",email:"",tel:"",address:""},message:""},hasCartsItems:!1,isLoading:!1,coupon_code:""}},methods:{getCart:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/cart");this.$http.get(t).then((function(t){e.isLoading=!1,t.data.success?(e.cart=t.data.data,0===e.cart.carts.length&&(e.successAlert("無購物車資料"),e.$router.push("/products/all"))):e.$httpMessageState(t,t.data.message)})).catch((function(e){console.dir(e)}))},createOrder:function(){var e=this;this.isLoading=!0;var t=this.form,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/order");this.$http.post(c,{data:t}).then((function(t){e.isLoading=!1,e.$httpMessageState(t,"建立訂單"),t.data.success&&(R["a"].emit("update-cartNum"),e.$router.push("/checkout/".concat(t.data.orderId)),e.$refs.form.resetForm(),e.form.message="")})).catch((function(e){console.dir(e)}))},addCouponCode:function(){var e=this,t={code:this.coupon_code};this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("peter1024","/coupon");this.$http.post(c,{data:t}).then((function(t){e.isLoading=!1,t.data.success?(e.$httpMessageState(t,"套用優惠券"),e.getCart()):e.$httpMessageState(t,t.data.message)}))},successAlert:function(e){this.$swal.fire({icon:"success",title:e,showConfirmButton:!1,timer:1500})}},computed:{discountNumber:function(){var e=Math.floor((this.cart.total-this.cart.final_total)/this.cart.total*100);return"(".concat(e,"% off)")}},watch:{cart:function(){this.hasCartsItems=!!this.cart.carts.length}},created:function(){this.getCart()}};c("3f6f");W.render=Q,W.__scopeId="data-v-64f03815";t["default"]=W},e8b5:function(e,t,c){var a=c("c6b6");e.exports=Array.isArray||function(e){return"Array"==a(e)}}}]);
//# sourceMappingURL=chunk-3725e0a5.7fafddb2.js.map