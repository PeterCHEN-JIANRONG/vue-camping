{"version":3,"sources":["webpack:///./src/views/Product.vue?56db","webpack:///./src/views/Product.vue","webpack:///./src/views/Product.vue?c8fc"],"names":["class","aria-label","style","aria-current","to","product","category","title","imageUrl","options","sell_status","model","price","origin_price","$filters","currency","type","qty","min","addCart","id","description","content","similarProducts","item","key","pushProductPage","disabled","loadingStatus","loadingItem","is_enabled","active","isLoading","getRandomInt","max","Math","floor","random","props","data","products","methods","getProduct","this","url","$http","get","then","res","success","getProductsAll","$httpMessageState","message","catch","error","console","dir","product_id","post","emit","getSimilarProducts","filterProducts","filter","randomArr","Set","maxSize","length","index","size","randomNum","add","forEach","push","$router","created","render","__scopeId"],"mappings":"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","file":"js/chunk-5550f29f.6f06a1e8.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Product.vue?vue&type=style&index=0&id=1e8fe802&lang=scss&scoped=true\"","<template>\n  <div class=\"container\">\n    <div class=\"d-flex justify-content-between align-items-center my-3 h6\">\n      <!-- 麵包屑 -->\n      <nav aria-label=\"breadcrumb\" style=\"--bs-breadcrumb-divider: '>';\">\n        <ol class=\"breadcrumb mb-0\">\n          <li class=\"breadcrumb-item\"><router-link to=\"/\">首頁</router-link></li>\n          <li class=\"breadcrumb-item\"><router-link to=\"/products/all\">產品</router-link></li>\n          <li class=\"breadcrumb-item\">\n            <router-link :to=\"`/products/${product.category}`\">{{ product.category }}</router-link>\n          </li>\n          <li class=\"breadcrumb-item active\" aria-current=\"page\">{{ product.title }}</li>\n        </ol>\n      </nav>\n    </div>\n    <hr class=\"my-4\" />\n    <div class=\"row\">\n      <div class=\"col-md-6 mb-4\">\n        <!-- <img class=\"img-fluid mb-4\" :src=\"product.imageUrl\" alt=\"\" /> -->\n        <div class=\"product__img\" :style=\"{ backgroundImage: `url('${product.imageUrl}')` }\"></div>\n        <!-- 產品次要照 -->\n        <!-- <div class=\"row\">\n          <div class=\"col-3\">\n            <img\n              class=\"img-fluid border border-secondary\"\n              :src=\"product.imageUrl\"\n              alt=\"\"\n              @click=\"showImageUrl = product.imageUrl\"\n            />\n          </div>\n          <div class=\"col-3\" v-for=\"item in product.imagesUrl\" :key=\"item\">\n            <img\n              class=\"img-fluid border border-secondary\"\n              :src=\"item\"\n              @click=\"showImageUrl = item\"\n            />\n          </div>\n        </div> -->\n      </div>\n      <div class=\"col-md-6 product__content mb-4\">\n        <h1 class=\"\">{{ product.title }}</h1>\n        <h5 class=\"mb-4\">\n          <span class=\"badge bg-secondary rounded-pill me-2\">\n            <router-link\n              class=\"text-white text-decoration-none\"\n              :to=\"`/products/${product.category}`\"\n              >{{ product.category }}</router-link\n            >\n          </span>\n          <span v-if=\"product.options.sell_status\" class=\"badge bg-danger rounded-pill\">\n            <router-link class=\"text-white text-decoration-none\" :to=\"`/products/暢銷商品`\">{{\n              product.options.sell_status\n            }}</router-link>\n          </span>\n        </h5>\n        <h2 class=\"h5 mb-3\">\n          產品型號：<span class=\"text-muted\">{{ product.options.model }}</span>\n        </h2>\n        <div class=\"mb-3\" v-if=\"product.price === product.origin_price\">\n          <h2 class=\"h5\">建議售價</h2>\n          <span class=\"h2 ps-3\"> {{ $filters.currency(product.origin_price) }} 元</span>\n        </div>\n        <div class=\"mb-3\" v-if=\"product.price !== product.origin_price\">\n          <h2 class=\"h5\">建議售價</h2>\n          <span class=\"h2 text-decoration-line-through ps-3\">\n            {{ $filters.currency(product.origin_price) }} 元\n          </span>\n        </div>\n        <div class=\"mb-4\" v-if=\"product.price !== product.origin_price\">\n          <h2 class=\"h5\">限時特價</h2>\n          <span class=\"h1 me-2 text-danger fw-bold ps-3\">{{\n            $filters.currency(product.price)\n          }}</span\n          ><span class=\"h2\">元</span>\n        </div>\n        <div class=\"input-group\">\n          <input type=\"number\" class=\"form-control text-center\" v-model.number=\"qty\" min=\"1\" />\n          <button type=\"button\" class=\"btn btn-primary btn-lg\" @click=\"addCart(product.id, qty)\">\n            加入購物車\n          </button>\n        </div>\n      </div>\n      <!-- col-sm-6 end -->\n    </div>\n    <div class=\"row\">\n      <div class=\"col product__description\">\n        <h2 class=\"h3 border-start border-3 border-secondary ps-2 mb-2\">商品描述</h2>\n        <p class=\"mb-4\">{{ product.description }}</p>\n        <h2 class=\"h3 border-start border-3 border-secondary ps-2 mb-2\">商品內容</h2>\n        <p>{{ product.content }}</p>\n      </div>\n    </div>\n    <hr />\n    <h2 class=\"mb-3\">相似產品</h2>\n    <div class=\"row mb-5\">\n      <div class=\"col-md-6 col-lg-4 mb-4\" v-for=\"item in similarProducts\" :key=\"item.id\">\n        <div class=\"card\" @click=\"pushProductPage(item)\">\n          <div\n            class=\"card__img position-relative\"\n            :style=\"{ backgroundImage: `url('${item.imageUrl}')` }\"\n          >\n            <span\n              v-if=\"item.options.sell_status\"\n              class=\"bg-danger text-white d-inline-block px-2 py-1\"\n              >{{ item.options.sell_status }}</span\n            >\n          </div>\n          <div class=\"card-body d-flex flex-column justify-content-center\">\n            <h2 class=\"card-title h5\">{{ item.title }}</h2>\n            <div class=\"h5 text-center py-1\" v-if=\"item.price\">\n              <span v-if=\"item.price != item.origin_price\" class=\"h6 text-decoration-line-through\">\n                ${{ $filters.currency(item.origin_price) }}\n              </span>\n              <span v-if=\"item.price != item.origin_price\" class=\"h4 text-danger fw-bold\">\n                ${{ $filters.currency(item.price) }}\n              </span>\n              <span v-if=\"item.price == item.origin_price\" class=\"h4 fw-bold\">\n                ${{ $filters.currency(item.price) }}\n              </span>\n              元\n            </div>\n            <div class=\"btn-group btn-group-sm\">\n              <button\n                type=\"button\"\n                class=\"btn btn-secondary\"\n                @click.stop=\"addCart(item.id, 1)\"\n                :disabled=\"loadingStatus.loadingItem === item.id || !item.is_enabled\"\n              >\n                加到購物車\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- vue-loading -->\n  <Loading :active=\"isLoading\"></Loading>\n</template>\n<script>\nimport emitter from '../methods/eventBus';\n\n// 取亂數\nfunction getRandomInt(max) {\n  return Math.floor(Math.random() * max);\n}\n\nexport default {\n  props: ['id'],\n  data() {\n    return {\n      product: {\n        origin_price: 0,\n        price: 0,\n        options: {},\n      },\n      qty: 1,\n      isLoading: false,\n      products: [],\n      similarProducts: [],\n      loadingStatus: false,\n    };\n  },\n  methods: {\n    getProduct(id) {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/product/${id}`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          this.isLoading = false;\n          if (res.data.success) {\n            this.product = res.data.product;\n            this.getProductsAll();\n          } else {\n            this.$httpMessageState(res, res.data.message);\n          }\n        })\n        .catch((error) => {\n          console.dir(error);\n        });\n    },\n    addCart(id, qty) {\n      this.isLoading = true;\n      const data = {\n        product_id: id,\n        qty,\n      };\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http\n        .post(url, { data })\n        .then((res) => {\n          this.isLoading = false;\n          this.$httpMessageState(res, res.data.message);\n          if (res.data.success) {\n            this.qty = 1;\n            emitter.emit('update-cartNum'); // 更新購物車icon顯示數量\n            // this.$router.push('/products');\n          }\n        })\n        .catch((error) => {\n          console.dir(error);\n        });\n    },\n    getProductsAll() {\n      this.isLoading = true;\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`;\n      this.$http\n        .get(url)\n        .then((res) => {\n          this.isLoading = false;\n          if (res.data.success) {\n            this.products = res.data.products;\n            this.getSimilarProducts();\n          } else {\n            this.$httpMessageState(res, res.data.message);\n          }\n        })\n        .catch((error) => {\n          console.dir(error);\n        });\n    },\n    getSimilarProducts() {\n      // 取得相似產品\n      const { category, id } = this.product;\n      // 過濾 相同類別 且 id不重複\n      const filterProducts = this.products.filter(\n        (item) => item.category === category && item.id !== id,\n      );\n      const randomArr = new Set([]);\n      const maxSize = filterProducts.length < 3 ? filterProducts.length : 3;\n\n      // 取得不重複亂數\n      for (let index = 0; randomArr.size < maxSize; index + 1) {\n        const randomNum = getRandomInt(filterProducts.length);\n        randomArr.add(randomNum);\n      }\n\n      randomArr.forEach((item) => {\n        this.similarProducts.push(filterProducts[item]);\n      });\n    },\n    pushProductPage(item) {\n      this.$router.push(`/product/${item.id}`);\n    },\n  },\n  created() {\n    // const { id } = this.$route.params;\n    this.getProduct(this.id);\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\nimg {\n  max-width: 100%;\n  height: auto;\n}\n\n.product__content {\n  p {\n    font-size: 20px;\n    line-height: 1.5;\n  }\n}\n\n.product__description {\n  p {\n    white-space: pre-line;\n    line-height: 1.5;\n  }\n}\n\n.product__img {\n  width: 100%;\n  height: 450px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n\n.card {\n  &:hover {\n    box-shadow: 0 0.125rem 0.25rem rgba(#000, 0.075);\n  }\n  .card-title {\n    max-width: 100%;\n  }\n  .card__img {\n    width: 100%;\n    height: 250px;\n    background-size: cover;\n    background-position: center;\n  }\n\n  .btn__favorite {\n    max-width: 50px;\n  }\n}\n</style>\n","import { render } from \"./Product.vue?vue&type=template&id=1e8fe802&scoped=true\"\nimport script from \"./Product.vue?vue&type=script&lang=js\"\nexport * from \"./Product.vue?vue&type=script&lang=js\"\n\nimport \"./Product.vue?vue&type=style&index=0&id=1e8fe802&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1e8fe802\"\n\nexport default script"],"sourceRoot":""}